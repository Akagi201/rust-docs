# Polkadot 共识

> 原文链接：<https://wiki.polkadot.network/docs/learn-consensus>
>
> 翻译：[Akagi201](https://github.com/Akagi201)

## 为什么我们需要共识？

共识是一种对共享状态达成协议的方法。为了使区块链的状态继续构建并向前发展，网络中的所有节点必须同意并达成共识。它是去中心化网络中的节点能够相互保持同步的方式。如果没有区块链中节点的去中心化网络的共识，就没有办法确保一个节点认为是真实的状态会被其他节点所共享。共识的目的是在对网络有各自主观看法的参与者中提供客观的状态观点。它是这些节点进行沟通并达成协议的过程，并能够构建新的区块。

## 什么是 PoW 和 PoS？

工作证明（PoW）和权益证明（PoS）被不准确地用作区块链共识机制的简称，但这并没有抓住全貌。PoW 是商定区块作者的方法，也是更全面的中本聪共识的一部分，其中还包括链选择算法（比特币中最长的链规则）。同样，PoS 是一套选择验证人的规则，并没有指定一个链的选择规则或一个链如何达到最终结果。PoS 算法传统上是与节点之间达成拜占庭协议的算法相搭配的。例如，Tendermint 是一种实用的拜占庭容错算法，它使用 PoS 作为其验证人集选择方法。

## 为什么不用工作量证明？

虽然在达成关于下一个区块生产者的分散共识方面简单而有效，但中本聪共识的工作证明消耗了大量的能源，没有经济或可证明的最终结果，也没有抵制卡特尔的有效策略。

## 委托权益证明

在传统的 PoS 系统中，区块生产的参与取决于代币持有量，而不是计算能力。虽然 PoS 开发者通常有一个主张以去中心化的方式公平参与，但大多数项目最终都提出了某种程度的中心化操作，其中拥有完全参与权的验证人的数量是有限的。这些验证人常被认为是最富有的，因此，影响 PoS 网络，因为他们的赌注最大。通常，拥有必要知识（和设备）来维护网络的候选人数量有限；这也会直接增加运营成本。拥有大量验证人的系统倾向于形成矿池，以减少其收入的差异，并从规模经济中获利。这些矿池往往是链外的。

缓解这种情况的方法是在链上实现矿池的形成，并允许代币持有者 [用他们的权益] 对代表他们的验证人进行投票。

Polkadot 使用 NPoS（Nominated Proof-of-Stake）作为其选择验证人组的机制。它被设计成验证人和提名人的角色，以最大限度地提高链的安全性。对维护网络感兴趣的行为者可以运行一个验证者节点。

验证人承担着在 BABE 中生产新区块、验证准区块和保证最终性的角色。提名人可以选择用他们的权益来支持选定的验证人。提名人可以批准他们信任的候选人，并用他们的代币支持他们。

## 概率性 vs 可证明的最终一致性

一个运行 PoW 的纯中本共识区块链只能实现概率最终性的概念并达成最终共识。概率最终性是指在关于网络和参与者的一些假设下，如果我们看到几个区块建立在一个给定的区块上，我们可以估计它是最终的概率。最终共识是指在未来的某个时间点，所有节点都会对一组数据的真实性达成共识。这种最终的共识可能需要很长的时间，并且将无法提前确定它需要多长时间。然而，最终性小程序，如 GRANDPA（基于 GHOST 的递归 ANcestor 衍生前缀协议）或以太坊的 Casper FFG（友好的最终性小程序），旨在对区块的最终性给予更强和更快的保证 -- 具体而言，在发生了一些拜占庭协议的过程后，它们永远无法被逆转。不可逆转的共识的概念被称为可证明的最终性。

在 GRANDPA 论文中，它是这样表述的。